# MemoScan v2 Environment Variables
# Copy this file to .env and update with your values

# === REQUIRED: API Keys ===
# OpenAI API key for GPT-4o analysis
OPENAI_API_KEY=your_openai_api_key_here

# === OPTIONAL: Enhanced Features ===
# Scrapfly API key for advanced web scraping (fallback to Playwright if not set)
SCRAPFLY_KEY=your_scrapfly_key_here

# === SECURITY ===
# Session secret key for CSRF protection and user sessions
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your_secret_key_here

# Admin API key for protected endpoints (/feedback/analytics, /api/costs, /api/metrics)
# If not set, a random key will be generated on startup
ADMIN_API_KEY=your_secure_admin_key_here

# Allowed CORS origins (comma-separated)
# Default: https://memoscan2.onrender.com,http://localhost:5000,http://127.0.0.1:5000
ALLOWED_ORIGINS=https://memoscan2.onrender.com,http://localhost:5000

# === STORAGE ===
# Directory for persistent data (feedback logs, cost tracking)
# Must be a writable directory that persists between deployments
# On Render: Use a disk mount point like /data
PERSISTENT_DATA_DIR=/data

# === CACHE CONFIGURATION ===
# Maximum cache size in megabytes (default: 100)
CACHE_MAX_SIZE_MB=100

# Maximum number of cached items (default: 1000)
CACHE_MAX_ITEMS=1000

# === LOGGING ===
# Log level: DEBUG, INFO, WARN, ERROR (default: INFO)
LOG_LEVEL=INFO

# Enable JSON structured logging (default: false)
# Set to true for production log aggregation systems
JSON_LOGGING=false

# === PERFORMANCE ===
# Maximum concurrent scans per server instance (default: 10)
# Reduce if experiencing memory issues
MAX_CONCURRENT_SCANS=10

# Rate limiting: requests per window (default: 5)
RATE_LIMIT_REQUESTS=5

# Rate limiting: window in seconds (default: 300)
RATE_LIMIT_WINDOW=300

# Request timeout in seconds (default: 600)
REQUEST_TIMEOUT=600

# Maximum scans per user per 24 hours (default: 20)
MAX_SCANS_PER_USER=20

# === DATA MANAGEMENT ===
# Data retention period in days (default: 90)
RETENTION_DAYS=90

# === DEPLOYMENT ===
# Port for the server (handled by Gunicorn in production)
PORT=5000

# === MONITORING ===
# Cost alert threshold in dollars (logs warning when exceeded)
COST_ALERT_THRESHOLD=1.0

# === DEVELOPMENT ===
# Enable debug mode (never use in production)
DEBUG=false